<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <title>–ö–Ω–∏–≥–∞—Ä–Ω—è</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/output.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&display=swap"
        rel="stylesheet">
</head>

<body>
    <main class="wrapper my-12">
        <div class="flex flex-col gap-6 mb-8">
            <h2>–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ, <%= user.username %>!</h2>
            <a class="btn self-start" href="/logout">–í–∏–π—Ç–∏</a>
            <form action="/delete-account" method="POST"
                onsubmit="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç? –¶—é –¥—ñ—é –Ω–µ–º–æ–∂–ª–∏–≤–æ —Å–∫–∞—Å—É–≤–∞—Ç–∏.')">
                <button class="btn" type="submit">
                    –í–∏–¥–∞–ª–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç
                </button>
            </form>
        </div>


        <h1 class="mb-6">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–Ω–∏–≥–∏</h1>
        <form class="flex flex-col w-fit gap-4 mb-6" action="/upload" method="POST" enctype="multipart/form-data">
            <div class="flex flex-col gap-2">
                <label>–ù–∞–∑–≤–∞:</label>
                <input type="text" name="filename" required>
            </div>

            <div class="flex flex-col gap-2">
                <label>–û–ø–∏—Å:</label>
                <textarea name="description" rows="2"></textarea>
            </div>

            <div class="flex flex-col gap-2">
                <label>–ê–≤—Ç–æ—Ä:</label>
                <input type="text" name="author" required>
            </div>

            <div class="flex flex-col gap-2">
                <label>–ñ–∞–Ω—Ä–∏:</label>
                <select class="min-h-28" name="genres" multiple required>
                    <% genres.forEach(genre=> { %>
                        <option value="<%= genre._id %>">
                            <%= genre.name %>
                        </option>
                        <% }); %>
                </select>
                <p class="text-sm text-gray-500">–£—Ç—Ä–∏–º—É–π—Ç–µ Ctrl (–∞–±–æ Command –Ω–∞ Mac), —â–æ–± –≤–∏–±—Ä–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –∂–∞–Ω—Ä—ñ–≤</p>
            </div>

            <div class="flex flex-col gap-2">
                <label>PDF-—Ñ–∞–π–ª:</label>
                <input type="file" name="pdf" accept="application/pdf" required>
            </div>

            <div class="flex flex-col gap-2">
                <label>–û–±–∫–ª–∞–¥–∏–Ω–∫–∞ (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è):</label>
                <input type="file" name="cover" accept="image/*">
            </div>

            <button type="submit">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
        </form>

        <hr class="mb-6">

        <h2 class="mb-6">–°–ø–∏—Å–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤:</h2>
        <ul class="flex flex-col gap-4">
            <% files.forEach(file=> { %>
                <li>
                    <a class="font-semibold" href="<%= file.filepath %>" target="_blank">
                        <%= file.filename %>
                    </a> (–¥–æ–¥–∞–Ω–æ <%= file.uploadedAt.toLocaleString() %>)

                        <form action="/delete/<%= file._id %>" method="POST" style="display:inline;">
                            <button class="p-[6px]!" type="submit">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</button>
                        </form>

                        <a class="btn p-[6px]!" href="/edit/<%= file._id %>">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                </li>
                <% }); %>
        </ul>
    </main>
</body>

</html>